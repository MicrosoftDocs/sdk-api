---
UID: NF:traceloggingprovider.TRACELOGGING_DEFINE_PROVIDER_STORAGE
title: TRACELOGGING_DEFINE_PROVIDER_STORAGE macro (traceloggingprovider.h)
description:
  Reserves static storage for a TraceLogging provider handle that will be
  defined by the user. Prefer TRACELOGGING_DEFINE_PROVIDER over this macro.
helpviewer_keywords:
  [
    "TRACELOGGING_DEFINE_PROVIDER_STORAGE",
    "TRACELOGGING_DEFINE_PROVIDER_STORAGE macro",
    "tracelogging.TRACELOGGING_DEFINE_PROVIDER_STORAGE",
    "tracelogging.traceloggingproviderstorage",
    "traceloggingprovider/TRACELOGGING_DEFINE_PROVIDER_STORAGE",
  ]
old-location: tracelogging\TRACELOGGING_DEFINE_PROVIDER_STORAGE.htm
tech.root: tracelogging
ms.assetid: C7244C95-5F02-4336-ADFF-876514665C87
ms.date: 06/06/2022
ms.keywords:
  TRACELOGGING_DEFINE_PROVIDER_STORAGE, TRACELOGGING_DEFINE_PROVIDER_STORAGE
  macro, tracelogging.TRACELOGGING_DEFINE_PROVIDER_STORAGE,
  tracelogging.traceloggingproviderstorage,
  traceloggingprovider/TRACELOGGING_DEFINE_PROVIDER_STORAGE
req.header: traceloggingprovider.h
req.include-header:
req.target-type: Windows
req.target-min-winverclnt: Windows Vista [desktop apps \| UWP apps]
req.target-min-winversvr: Windows Server 2008 [desktop apps \| UWP apps]
req.kmdf-ver:
req.umdf-ver:
req.ddi-compliance:
req.unicode-ansi:
req.idl:
req.max-support:
req.namespace:
req.assembly:
req.type-library:
req.lib:
req.dll:
req.irql:
targetos: Windows
req.typenames:
req.redist:
ms.custom: 19H1
f1_keywords:
  - TRACELOGGING_DEFINE_PROVIDER_STORAGE
  - traceloggingprovider/TRACELOGGING_DEFINE_PROVIDER_STORAGE
dev_langs:
  - c++
topic_type:
  - APIRef
  - kbSyntax
api_type:
  - HeaderDef
api_location:
  - traceloggingprovider.h
api_name:
  - TRACELOGGING_DEFINE_PROVIDER_STORAGE
---

# TRACELOGGING_DEFINE_PROVIDER_STORAGE macro

## -description

Reserves static storage for a TraceLogging provider handle that will be defined
by the user. Prefer
[TRACELOGGING_DEFINE_PROVIDER](./nf-traceloggingprovider-tracelogging_define_provider.md)
over this macro.

## -parameters

### -param storageVariable [in]

The name to use for the static provider storage variable, e.g.
`MyStaticProviderStorage`.

### -param providerName [in]

A string literal with the name of the TraceLogging provider. This name should be
specific to your organization and component so that it does not conflict with
providers from other components. This name string will be included within each
ETW event generated by the provider, so try to use a relatively short name. For
example, you might use a name like `"MyCompany.MyComponent"` or
`"MyCompany.MyOrganization.MyComponent"`.

This must be a string literal. Do not use a variable.

### -param providerId [in]

The ETW Control GUID for the provider, specified as a comma-separated list of 11
integers in parentheses. For example, the GUID
`{ce5fa4ea-ab00-5402-8b76-9f76ac858fb5}` would be expressed as
`(0xce5fa4ea,0xab00,0x5402,0x8b,0x76,0x9f,0x76,0xac,0x85,0x8f,0xb5)`.

While any unique GUID can be used for the provider ID, Microsoft recommends
using a GUID generated from the provider name using the ETW name-hashing
algorithm. See
[TRACELOGGING_DEFINE_PROVIDER](./nf-traceloggingprovider-tracelogging_define_provider.md)
for information about generating the provider ID.

### -param __VA_ARGS__ [in, optional]

Optional parameters for the provider. Most providers do not need to specify any
optional parameters.

If you want your provider to be associated with an
[ETW provider group](/windows/win32/etw/provider-traits), add the
[TraceLoggingOptionGroup](./nf-traceloggingprovider-traceloggingoptiongroup.md)
macro to specify the provider's group GUID. Otherwise, do not specify any
`__VA_ARGS__` parameters.

## -remarks

In most cases you will use
[TRACELOGGING_DEFINE_PROVIDER](./nf-traceloggingprovider-tracelogging_define_provider.md)
instead of this macro. In certain unusual scenarios, you may need to use this
macro to allocate static storage for a TraceLogging provider without also
declaring the handle variable. Your code will subsequently declare the handle
variable as appropriate.

**TRACELOGGING_DEFINE_PROVIDER_STORAGE** will declare a static variable with the
data needed for a provider. You can then create a handle by taking the address
of this variable. An invocation of
`TRACELOGGING_DEFINE_PROVIDER_STORAGE(storageVar, ...)` can be thought of as
similar to code like:

```c
static TraceLoggingProviderState storageVar = { ... };
```

Example usage:

```c
TRACELOGGING_DEFINE_PROVIDER_STORAGE( // defines static storageVar
    storageVar, // Name of the storage variable
    "MyCompany.MyComponent", // Human-readable name for the provider
    // {ce5fa4ea-ab00-5402-8b76-9f76ac858fb5}
    (0xce5fa4ea,0xab00,0x5402,0x8b,0x76,0x9f,0x76,0xac,0x85,0x8f,0xb5));

const TraceLoggingHProvider g_hMyProvider = &storageVar; // Make a handle
```

## -see-also

[TRACELOGGING_DECLARE_PROVIDER](./nf-traceloggingprovider-tracelogging_declare_provider.md)

[TRACELOGGING_DEFINE_PROVIDER](./nf-traceloggingprovider-tracelogging_define_provider.md)

[TraceLoggingWrite](./nf-traceloggingprovider-traceloggingwrite.md)
